import { Canvas } from "@storybook/addon-docs";
import { UseCollectionQuery } from "./UseCollectionQuery";
import { List } from "@jobber/components/List";
import {
  propsList,
  returnValues,
  subscriptionPropsList,
} from "@jobber/hooks/useCollectionQuery/mdxUtils";
import { useCollectionQuery } from "@jobber/hooks/useCollectionQuery";

# UseCollectionQuery

`useCollectionQuery` is a generalized hook that aids in the interaction of data
collections. For use with any lists populated by graphQL collections.

```tsx
import { useCollectionQuery } from "@jobber/hooks/useCollectionQuery";

const {
  data,
  error,
  refresh,
  nextPage,
  loadingRefresh,
  loadingNextPage,
  loadingInitialContent,
} = useCollectionQuery<ListQueryType, SubscriptionType>({
  query: LIST_QUERY,
  queryOptions: {
    fetchPolicy: "network-only",
    nextFetchPolicy: "cache-first",
  },
  getCollectionByPath(items) {
    return items.path.to.collection;
  },
  subscription: {
    // subscriptions are optional
    document: SUBSCRIPTION_QUERY,
    getNodeByPath(items) {
      return items.path.to.node;
    },
});
```

<Canvas>
  <UseCollectionQuery />
</Canvas>

## Props

<List items={propsList} />

## Subscription props

<List items={subscriptionPropsList} />

## Return values

<List items={returnValues} />

---
