.vertical > *:not(:last-child) {
  margin-bottom: -1px !important;
}

.horizontal {
  display: flex;
}

.horizontal > *:not(:last-child) {
  margin-bottom: auto;
  margin-right: -1px;
}

/* Reset radii inside a group; specific rules will re-add outer rounding */
.inputGroup {
  --public-field--top-left-radius: 0;
  --public-field--top-right-radius: 0;
  --public-field--bottom-left-radius: 0;
  --public-field--bottom-right-radius: 0;
}

/* Vertical: restore outer rounding on first/last items */
.vertical > :first-child:not(.horizontal) {
  --public-field--top-left-radius: var(--radius-base);
  --public-field--top-right-radius: var(--radius-base);
}

.vertical > :last-child:not(.horizontal) {
  --public-field--bottom-left-radius: var(--radius-base);
  --public-field--bottom-right-radius: var(--radius-base);
}

/* Horizontal: restore outer rounding on left/right items */
.horizontal > :first-child:not(.horizontal) {
  --public-field--top-left-radius: var(--radius-base);
  --public-field--bottom-left-radius: var(--radius-base);
}

.horizontal > :last-child:not(.horizontal) {
  --public-field--top-right-radius: var(--radius-base);
  --public-field--bottom-right-radius: var(--radius-base);
}

/* Nested horizontal groups inside a horizontal parent */
/* If the nested group is the first child, round its first field's left corners */
/* If the nested group is not at the left edge, flatten its first field's left corners */
.horizontal > .horizontal:not(:first-child) > :first-child {
  --public-field--top-left-radius: 0;
  --public-field--bottom-left-radius: 0;
}

/* If the nested group is not at the right edge, flatten its last field's right corners */
.horizontal > .horizontal:not(:last-child) > :last-child {
  --public-field--top-right-radius: 0;
  --public-field--bottom-right-radius: 0;
}

/* Vertical group containing horizontal rows: control top/bottom rounding */
/* First row: round only the outer top corners */
.vertical > .horizontal:first-child > :first-child {
  --public-field--top-left-radius: var(--radius-base);
}

.vertical > .horizontal:first-child > :last-child {
  --public-field--top-right-radius: var(--radius-base);
}

/* Last row: round only the outer bottom corners */
.vertical > .horizontal:last-child > :first-child {
  --public-field--bottom-left-radius: var(--radius-base);
}

.vertical > .horizontal:last-child > :last-child {
  --public-field--bottom-right-radius: var(--radius-base);
}

/* Middle rows: flatten top/bottom on both row edges */
.vertical > .horizontal:not(:first-child) > :first-child,
.vertical > .horizontal:not(:first-child) > :last-child {
  --public-field--top-left-radius: 0;
  --public-field--top-right-radius: 0;
}

.vertical > .horizontal:not(:last-child) > :first-child,
.vertical > .horizontal:not(:last-child) > :last-child {
  --public-field--bottom-left-radius: 0;
  --public-field--bottom-right-radius: 0;
}
