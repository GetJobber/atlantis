---
name: Autocomplete
menu: Components
route: /components/autocomplete
---

import { Playground, Props } from "docz";
import { ComponentStatus } from "@jobber/docx";
import { Button } from "../Button";
import { Autocomplete } from ".";
import { useState } from "react";

# Autocomplete

<ComponentStatus stage="pre" responsive="no" accessible="no" />

An autocomplete allows a user to quickly pick a preset value from a larger list
of possible options.

If the number of available options is smaller consider a [Select](select)
instead.

```ts
import { Autocomplete } from "@jobber/components/Autocomplete";
```

<Playground>
    {() => {
    const options = [
        { value: 1, label: "Nostromo" },
        { value: 2, label: "Rodger Young" },
        { value: 3, label: "Serenity" },
        { value: 4, label: "Sleeper Service" },
        { value: 5, label: "Enterprise" },
        { value: 6, label: "Enterprise-D" },
      ];

    const [value, setValue] = useState();

    return (
      <Autocomplete
        value={value}
        initialOptions={[]}
        onChange={setValue}
        getOptions={getOptions}
        placeholder="Search for something"
      />
    );

    function getOptions(text) {
      if (text === "") {
        return options;
      }

      const filterRegex = new RegExp(text, "i");
      return options.filter(option => option.label.match(filterRegex));
    }

}}

</Playground>

## Props

<Props of={Autocomplete} />

---

<!--
  It is not necessary to provide an example of each prop. Use usage examples to
  highlight key features of a component or particular considerations.

  See `Button.mdx` for a good example of this.
-->

## Setting Value

You can supply a value to `Autocomplete` in the form of an active `Option`.

<Playground>
    {() => {
    const options = [
        { value: 1, label: "Nostromo" },
        { value: 2, label: "Rodger Young" },
        { value: 3, label: "Serenity" },
        { value: 4, label: "Sleeper Service" },
        { value: 5, label: "Enterprise" },
        { value: 6, label: "Enterprise-D" },
      ];

    const [value, setValue] = useState();

    return (
      <>
      <pre>{JSON.stringify(value, undefined, 2)}</pre>
      <Autocomplete
        value={value}
        initialOptions={[]}
        onChange={setValue}
        getOptions={getOptions}
        placeholder="Search for something"
      />
      <Button label="Choose the Enterprise" onClick={() => {setValue(options[4])}} />
      <Button label="Reset" onClick={() => {setValue()}} />
      </>
    );

    function getOptions(text) {
      if (text === "") {
        return options;
      }

      const filterRegex = new RegExp(text, "i");
      return options.filter(option => option.label.match(filterRegex));
    }

}}

</Playground>

## Async Requests for Options

The `getOptions` method expected to be async so you can do any desired requests
using either promises or `await` in `getOptions`.

<Playground>
    {() => {
    const options = [
        { value: 1, label: "Nostromo" },
        { value: 2, label: "Rodger Young" },
        { value: 3, label: "Serenity" },
        { value: 4, label: "Sleeper Service" },
        { value: 5, label: "Enterprise" },
        { value: 6, label: "Enterprise-D" },
      ];

    const [value, setValue] = useState();

    return (
      <Autocomplete
        value={value}
        initialOptions={[]}
        onChange={setValue}
        getOptions={getOptions}
        placeholder="Search for something"
      />
    );

    async function getOptions(text) {
      return new Promise(resolve => {
        setTimeout(() => {
          if (text === "") {
            resolve(options);
          }

          const filterRegex = new RegExp(text, "i");
          resolve(options.filter(option => option.label.match(filterRegex)));
        }, 300);
      });
    }

}}

</Playground>
