---
name: Autocomplete
menu: Components
route: /components/autocomplete
---

import { Playground, Props } from "docz";
import { ComponentStatus } from "@jobber/docx";
import { Button } from "../Button";
import { Autocomplete } from ".";
import { useState } from "react";

# Autocomplete

<ComponentStatus stage="pre" responsive="no" accessible="no" />

An autocomplete allows a user to quickly pick a preset value from a larger list
of possible options.

If the number of available options is smaller consider a [Select](select)
instead.

```ts
import { Autocomplete } from "@jobber/components/Autocomplete";
```

<Playground>
  {() => {
    const options = [
      { value: 1, label: "Nostromo" },
      { value: 2, label: "Rodger Young" },
      { value: 3, label: "Serenity" },
      { value: 4, label: "Sleeper Service" },
      { value: 5, label: "Enterprise" },
      { value: 6, label: "Enterprise-D" }
    ];
    const [value, setValue] = useState();
    return (
      <Autocomplete
        value={value}
        initialOptions={[]}
        onChange={setValue}
        getOptions={getOptions}
        placeholder="Search for something"
      />
    );
    function getOptions(text) {
      if (text === "") {
        return options;
      }
      const filterRegex = new RegExp(text, "i");
      return options.filter(option => option.label.match(filterRegex));
    }
  }}
</Playground>

## Props

<Props of={Autocomplete} />

---

<!--
  It is not necessary to provide an example of each prop. Use usage examples to
  highlight key features of a component or particular considerations.

  See `Button.mdx` for a good example of this.
-->

## Autocomplete with optional item descriptions and extra details

You can add a description to an option, which will appear below the option's
label. You can also add a detail to an option which shows on the option's the
bottom right. Both of these are optional per option.

<Playground>
  {() => {
    const options = [
      {
        value: 1,
        label: "Sulaco",
        description: "They mostly come at night, mostly.",
        details: "LV-426"
      },
      { value: 2, label: "Nostromo", details: "LV-426" },
      { value: 3, label: "Serenity", description: "I aim to misbehave." },
      { value: 4, label: "Sleeper Service" },
      { value: 5, label: "Enterprise" },
      {
        value: 6,
        label: "Enterprise-D",
        description: "Tea, earl grey, hot.",
        details: "NCC-1701D"
      }
    ];
    const [value, setValue] = useState();
    return (
      <Autocomplete
        value={value}
        initialOptions={options}
        onChange={setValue}
        getOptions={getOptions}
        placeholder="Search for something"
      />
    );
    function getOptions(text) {
      if (text === "") {
        return options;
      }
      const filterRegex = new RegExp(text, "i");
      return options.filter(option =>
        option.heading ? true : option.label.match(filterRegex)
      );
    }
  }}
</Playground>

## Autocomplete with menu size constraint

You can specify a medium size which limits the menu to 300px.

<Playground>
  {() => {
    const options = [
      { value: 1, label: "Sulaco" },
      { value: 2, label: "Nostromo" },
      { value: 3, label: "Serenity" },
      { value: 4, label: "Sleeper Service" },
      { value: 5, label: "Enterprise" },
      { value: 6, label: "Enterprise-D" },
      { value: 7, label: "Endor" },
      { value: 8, label: "Vulcan" },
      { value: 9, label: "Bespin" },
      { value: 10, label: "Tatooine" },
      { value: 11, label: "Enterprise" },
      { value: 12, label: "Ariel" }
    ];
    const [value, setValue] = useState();
    return (
      <Autocomplete
        value={value}
        checkmarks={false}
        menuSize={"medium"}
        initialOptions={options}
        onChange={setValue}
        getOptions={getOptions}
        placeholder="Search for something"
      />
    );
    function getOptions(text) {
      if (text === "") {
        return options;
      }
      const filterRegex = new RegExp(text, "i");
      return options.filter(option =>
        option.heading ? true : option.label.match(filterRegex)
      );
    }
  }}
</Playground>

## Autocomplete with checkmarks removed

You can remove the checkmarks when an option is selected.

<Playground>
  {() => {
    const options = [
      { value: 1, label: "Sulaco" },
      { value: 2, label: "Nostromo" },
      { value: 3, label: "Serenity" },
      { value: 4, label: "Sleeper Service" },
      { value: 5, label: "Enterprise" },
      { value: 6, label: "Enterprise-D" }
    ];
    const [value, setValue] = useState();
    return (
      <Autocomplete
        value={value}
        checkmarks={false}
        initialOptions={options}
        onChange={setValue}
        getOptions={getOptions}
        placeholder="Search for something"
      />
    );
    function getOptions(text) {
      if (text === "") {
        return options;
      }
      const filterRegex = new RegExp(text, "i");
      return options.filter(option =>
        option.heading ? true : option.label.match(filterRegex)
      );
    }
  }}
</Playground>

## Autocomplete with option separators

You can apply a separator to each option which appears as a bottom border.

<Playground>
  {() => {
    const options = [
      { value: 1, label: "Sulaco" },
      { value: 2, label: "Nostromo" },
      { value: 3, label: "Serenity" },
      { value: 4, label: "Sleeper Service" },
      { value: 5, label: "Enterprise" },
      { value: 6, label: "Enterprise-D" }
    ];
    const [value, setValue] = useState();
    return (
      <Autocomplete
        value={value}
        separators={true}
        initialOptions={options}
        onChange={setValue}
        getOptions={getOptions}
        placeholder="Search for something"
      />
    );
    function getOptions(text) {
      if (text === "") {
        return options;
      }
      const filterRegex = new RegExp(text, "i");
      return options.filter(option =>
        option.heading ? true : option.label.match(filterRegex)
      );
    }
  }}
</Playground>

## Autocomplete with section headings

An autocomplete can provide section headings to break up the options.

<Playground>
  {() => {
    const options = [
      { label: "Ships", heading: true },
      { value: 1, label: "Sulaco" },
      { value: 2, label: "Nostromo" },
      { value: 3, label: "Serenity" },
      { value: 4, label: "Sleeper Service" },
      { value: 5, label: "Enterprise" },
      { value: 6, label: "Enterprise-D" },
      { label: "Planets", heading: true },
      { value: 7, label: "Endor" },
      { value: 8, label: "Vulcan" },
      { value: 9, label: "Bespin" },
      { value: 10, label: "Tatooine" },
      { value: 11, label: "Enterprise" },
      { value: 12, label: "Ariel" }
    ];
    const [value, setValue] = useState();
    return (
      <Autocomplete
        value={value}
        separators={true}
        checkmarks={false}
        initialOptions={options}
        onChange={setValue}
        getOptions={getOptions}
        placeholder="Search for something"
      />
    );
    function getOptions(text) {
      if (text === "") {
        return options;
      }
      const filterRegex = new RegExp(text, "i");
      return options.filter(option =>
        option.heading ? true : option.label.match(filterRegex)
      );
    }
  }}
</Playground>

## Autocomplete with section headings, description and extra details

This autocomplete uses section headings, details, descriptions and option
separators. It also removes the checkmarks when selecting an item.

<Playground>
  {() => {
    const options = [
      { label: "Ships", heading: true },
      {
        value: 1,
        label: "Sulaco",
        description: "They mostly come at night, mostly.",
        details: "LV-426"
      },
      { value: 2, label: "Nostromo", details: "LV-426" },
      { value: 3, label: "Serenity", description: "I aim to misbehave." },
      { value: 4, label: "Sleeper Service" },
      { value: 5, label: "Enterprise" },
      {
        value: 6,
        label: "Enterprise-D",
        description: "Tea, earl grey, hot.",
        details: "NCC-1701D"
      },
      { label: "Planets", heading: true },
      { value: 7, label: "Endor" },
      { value: 8, label: "Vulcan" },
      { value: 9, label: "Bespin" },
      { value: 10, label: "Tatooine" },
      { value: 11, label: "Enterprise" },
      { value: 12, label: "Ariel" }
    ];
    const [value, setValue] = useState();
    return (
      <Autocomplete
        value={value}
        separators={true}
        checkmarks={false}
        initialOptions={options}
        onChange={setValue}
        getOptions={getOptions}
        placeholder="Search for something"
      />
    );
    function getOptions(text) {
      if (text === "") {
        return options;
      }
      const filterRegex = new RegExp(text, "i");
      return options.filter(option =>
        option.heading ? true : option.label.match(filterRegex)
      );
    }
  }}
</Playground>

## Setting Value

You can supply a value to `Autocomplete` in the form of an active `Option`.

<Playground>
  {() => {
    const options = [
      { value: 1, label: "Nostromo" },
      { value: 2, label: "Rodger Young" },
      { value: 3, label: "Serenity" },
      { value: 4, label: "Sleeper Service" },
      { value: 5, label: "Enterprise" },
      { value: 6, label: "Enterprise-D" }
    ];
    const [value, setValue] = useState();
    return (
      <>
        <pre>{JSON.stringify(value, undefined, 2)}</pre>
        <Autocomplete
          value={value}
          initialOptions={[]}
          onChange={setValue}
          getOptions={getOptions}
          placeholder="Search for something"
        />
        <Button
          label="Choose the Enterprise"
          onClick={() => {
            setValue(options[4]);
          }}
        />
        <Button
          label="Reset"
          onClick={() => {
            setValue();
          }}
        />
      </>
    );
    function getOptions(text) {
      if (text === "") {
        return options;
      }
      const filterRegex = new RegExp(text, "i");
      return options.filter(option => option.label.match(filterRegex));
    }
  }}
</Playground>

## Async Requests for Options

The `getOptions` method expected to be async so you can do any desired requests
using either promises or `await` in `getOptions`.

<Playground>
  {() => {
    const options = [
      { value: 1, label: "Nostromo" },
      { value: 2, label: "Rodger Young" },
      { value: 3, label: "Serenity" },
      { value: 4, label: "Sleeper Service" },
      { value: 5, label: "Enterprise" },
      { value: 6, label: "Enterprise-D" }
    ];
    const [value, setValue] = useState();
    return (
      <Autocomplete
        value={value}
        initialOptions={[]}
        onChange={setValue}
        getOptions={getOptions}
        placeholder="Search for something"
      />
    );
    async function getOptions(text) {
      return new Promise(resolve => {
        setTimeout(() => {
          if (text === "") {
            resolve(options);
          }
          const filterRegex = new RegExp(text, "i");
          resolve(options.filter(option => option.label.match(filterRegex)));
        }, 300);
      });
    }
  }}
</Playground>
