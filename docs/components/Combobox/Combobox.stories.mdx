<Meta
  title="Components/Selections/Combobox/Docs"
  parameters={{ alpha: true }}
/>

# Combobox

The `Combobox` is designed to provide a versatile and accessible interface for
selecting options from a list. `Combobox` can be used for a variety of
scenarios, such as selecting items from a predefined list, filtering and
searching through data.

## Design & usage guidelines

The `Combobox` component's primary function is to facilitate option selection
and searching within a list of items.

It should be used in scenarios where users need to choose from a set of options,
with the added benefit of filtering.

The `Combobox` also has flexibility to allow for custom actions, such as adding
a new item to the list of options or managing a selection.

### Structure

`Combobox` is composed of three main parts:

#### Trigger

The trigger is the user-facing interface to open and close the `Combobox` and
initiate option selection. The choice between them depends on the design and
user experience requirements.

There are two options for trigger elements of the `Combobox`,
[TriggerButton](../?path=/story/components-selections-combobox-web--trigger-button)
and
[TriggerChip](../?path=/story/components-selections-combobox-web--trigger-chip).
You must have one trigger component.

#### Content

This component is responsible for displaying the list of selectable options,
handling user interactions, and managing search functionality.

#### Action

Actions are an optional way to allow users to perform custom tasks such as
adding a new item to the list of options.

#### Callback

`onSelect` is the recommended callback handler that should be used in most cases. This will immediately inform
the consumer of changes to selections as they happen.

If however immediate changes are not desired, and instead it is preferable to wait until all selections or
modifications to selections have been made before informing the consumer, `onClose` may be used. The arguments provided to this callback are
Identical to those of `onSelect`, only the timing differs. Please note this will only
have a noticeable effect with `multiSelect = true` since the Combobox closes immediately upon selection with single-select.

## Content guidelines

Combobox is designed to handle lists of selectable options, so the component is
text based.

You may customize the trigger and action `label`. Refer to the
[Product Vocabulary](../?path=/docs/content-product-vocabulary--page) for
consistency in terminology and naming conventions when setting these values.

You may also set an optional `subjectNoun` for the `Combobox` content. This will
be used in the
[empty state](../?path=/story/components-selections-combobox-web--empty-state)
of the `Combobox`, as well as the noun within the search placeholder.

Follow InputText content guidelines for the text input.

Follow Button content guidelines for the actions.

### Empty states

In cases where the list of options is empty, the `Combobox` content will display
a message indicating the absence of options. The default will read, _"No options
yet"_ or _"You don't have any [subjectNoun] yet"_ if you've set the
`subjectNoun` prop.

If options are available, but the search query does not match any of them, the
Combobox Content will display a message indicating that no options match the
search query.

## Accessibility

### Keyboard operation

- The trigger can be actioned with `space` or `return`
- The Comobox confines tabbing to within itself while it's open using
  [useFocusTrap](https://atlantis.getjobber.com/?path=/docs/hooks-usefocustrap--use-focus-trap)
- Pressing `esc` will close the `Combobox` and return focus to the trigger using
  [useRefocusOnActivator](https://atlantis.getjobber.com/?path=/docs/hooks-userefocusonactivator--use-refocus-on-activator)
- The search input is automatically focused when the `Combobox` opens. The
  button to clear the input can be focused with `tab`
- Pressing `tab` again will set focus to the options list, which are navigated
  by the `up` and `down` arrow keys, and actioned with `space` or `return`
- Pressing `tab` again will set focus to the actions (if present), or return
  focus to the input if not

### Assistive technology

- The trigger element is given a `role="combobox"` to inform the user the type
  of content they'll be interacting with
- Once the user opens the `Combobox`, the search input is focused and announced
- The title and "selected/unselected" status of each item is announced as the
  user navigates the options
- The actions (if present) are announced and operable as buttons
