import { Meta } from "@storybook/addon-docs";
import { Card } from "@jobber/components/Card";
import { List } from "@jobber/components/List";

<Meta title="Components/Lists and Tables/List" />

# List

The `List` component renders a collection of items in a structured way. It
supports both [flat lists](#basic-flat-list) and
[sectioned lists](#sectioned-list), and allows for
[custom rendering](#custom-rendering-advanced-usage) of list items via a render
function.

## Design and Usage Guidelines

The `List` component is a great solution if you are looking to display a
collection of objects that are either the same type or related to one another,
like billing or activity feed. The main purpose of a list is to help the user
find an object that leads to its full representation.

The majority of list implementations can be achieved without needing to
customize rendering. If your items conform to the `ListItemProps` interface, the
component will render them automatically with the default behavior. The
`ListItemProps` must be used when using default rendering.

#### Basic Flat List

<Canvas>
  <Card>
    <List
      items={[
        {
          id: 1,
          content: "Content",
          icon: "work",
          iconColor: "interactive",
          title: "Title",
          value: "Value",
          onClick: () => alert("First list item clicked"),
        },
        {
          id: 2,
          content: "Content",
          icon: "work",
          iconColor: "interactive",
          title: "Title",
          value: "Value",
          onClick: () => alert("Second list item clicked"),
        },
      ]}
    />
  </Card>
</Canvas>

#### Sectioned List

If a section field is present in any item, the list will group the items by
their section and display them under section headers.

<Canvas>
  <Card>
    <List
      items={[
        {
          id: 1,
          content: "Content",
          icon: "work",
          iconColor: "interactive",
          title: "Title",
          value: "Value",
          section: "Section 1",
          onClick: () => alert("First list item clicked"),
        },
        {
          id: 2,
          content: "Content",
          icon: "work",
          iconColor: "interactive",
          title: "Title",
          value: "Value",
          section: "Section 1",
          onClick: () => alert("Second list item clicked"),
        },
        {
          id: 3,
          content: "Content",
          icon: "work",
          iconColor: "interactive",
          title: "Title",
          value: "Value",
          section: "Section 2",
          onClick: () => alert("Second list item clicked"),
        },
      ]}
    />
  </Card>
</Canvas>

#### Context Complexity

The default full bleed (width) + bottom bordered style is preferred when the
list item contains complex content where non-complex content would be something
like Menu's content which has a different style but identical functionality
otherwise.

### **Custom Rendering (Advanced Usage)**

If you need more control over the rendering of list items, you can provide a
**custom render function** using the `customRenderItem` prop. This is useful if
the default rendering of the `ListItem` component doesn’t meet your
requirements. If a custom render function is provided onClick, url, and hover
functionality will still work. Sectioned list functionality will also remain the
same.

Lastly, you will be required to implement the spacing, alignment and border
bottom CSS logic.

**Example: Custom Render Function with Custom Interface**

```tsx
import { List } from "./List";

interface ProductListItemProps extends BaseListItemProps {
  readonly name: string;
  readonly price: string;
  readonly section: string;
  readonly onClick?: () => void;
}

const items: ProductListItemProps[] = [
  { id: 1, name: "Lawn Mower", price: "$250.00", section: "Garden Tools", onClick: () => alert("Lawn Mower clicked") },
  { id: 2, name: "Hedge Trimmer", price: "$85.00", section: "Garden Tools", onClick: () => alert("Hedge Trimmer clicked") },
  { id: 3, name: "Drill", price: "$50.00", section: "Power Tools", onClick: () => alert("Drill clicked") },
  { id: 4, name: "Screwdriver", price: "$10.00", section: "Hand Tools", onClick: () => alert("Screwdriver clicked") },
];


const renderProductItem = (item: ProductListItemProps) => (
    <div className="customContainer">
        <Text>{item.price}</Text>
        <Heading level={4}>{item.name}</Heading>
    </div>
  </div>
);

export const CustomRenderExample = () => (
  <List items={items} customRenderItem={renderProductItem} />
);

// *.module.css

.customContainer {
  display: flex;
  alignItems: center;
  justifyContent: flex-start;
  text-align: left;
}

.customContainer > * {
  padding: var(--space-small);
}

li > ul > li:not(:last-child) .customContainer {
  border-bottom: var(--border-base) solid var(--color-border);
}
```

**In this example**:

- We define a custom interface (`ProductListItemProps`) that extends
  `BaseListItemProps`.
- The `customRenderItem` function provides complete control over how each item
  is rendered.
- We replicate the padding, alignment and border logic

**When to Use Custom Rendering:**

- Use a custom render function when you need complex layouts that the `ListItem`
  component can’t provide.
- Create your own interface extending `BaseListItemProps` to define the fields
  you need.

##### Replicating Default List Styles

In the above example we must use `li > ul > li:not(:last-child) .{customClass}`
because it is a sectioned list having nested ul and li elements.

For a non sectioned list `li:not(:last-child) .{customClass}` would suffice.

For the spacing, it is achieved with `small` padding on the item container, then
an additional `small` padding on the elements inside.
